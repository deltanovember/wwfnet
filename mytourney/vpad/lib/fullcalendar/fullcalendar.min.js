/*

 FullCalendar v1.5.2
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sun Aug 21 22:06:09 2011 -0700

*/
(function(h,y){function Oa(a){h.extend(true,ta,a)}function mb(a,c,b){function e(){setTimeout(function(){!l.start&&h("body")[0].offsetWidth!==0&&n()},0)}function d(a){if(!l||a!=l.name){A++;s();var b=l,c;b?((b.beforeHide||Pa)(),ua(x,x.height()),b.element.hide()):ua(x,1);x.css("overflow","hidden");(l=M[a])?l.element.show():l=M[a]=new Z[a](c=U=h("<div class='fc-view fc-view-"+a+"' style='position:absolute'/>").appendTo(x),q);b&&k.deactivateButton(b.name);k.activateButton(a);n();x.css("overflow","");b&&
ua(x,1);c||(l.afterShow||Pa)();A--}}function n(b){if(t.offsetWidth!==0){A++;s();aa===y&&g();var x=false;!l.start||b||w<l.start||w>=l.end?(l.render(w,b||0),r(true),x=true):l.sizeDirty?(l.clearEvents(),r(),x=true):l.eventsDirty&&(l.clearEvents(),x=true);l.sizeDirty=false;l.eventsDirty=false;b=x;!c.lazyFetching||J(l.visStart,l.visEnd)?i():b&&v();$=a.outerWidth();k.updateTitle(l.title);b=new Date;b>=l.start&&b<l.end?k.disableButton("today"):k.enableButton("today");A--;l.trigger("viewDisplay",t)}}function j(){f();
if(t.offsetWidth!==0)g(),r(),s(),l.clearEvents(),l.renderEvents(F),l.sizeDirty=false}function f(){h.each(M,function(a,b){b.sizeDirty=true})}function g(){aa=c.contentHeight?c.contentHeight:c.height?c.height-(K?K.height():0)-na(x):Math.round(x.width()/Math.max(c.aspectRatio,0.5))}function r(a){A++;l.setHeight(aa,a);U&&(U.css("position","relative"),U=null);l.setWidth(x.width(),a);A--}function m(){if(!A)if(l.start){var b=++R;setTimeout(function(){if(b==R&&!A&&t.offsetWidth!==0&&$!=($=a.outerWidth()))A++,
j(),l.trigger("windowResize",t),A--},200)}else e()}function i(){p(l.visStart,l.visEnd)}function v(a){S();if(t.offsetWidth!==0)l.clearEvents(),l.renderEvents(F,a),l.eventsDirty=false}function S(){h.each(M,function(a,b){b.eventsDirty=true})}function s(){l&&l.unselect()}var q=this;q.options=c;q.render=function(b){x?(g(),f(),S(),n(b)):(a.addClass("fc"),c.isRTL&&a.addClass("fc-rtl"),c.theme&&a.addClass("ui-widget"),x=h("<div class='fc-content' style='position:relative'/>").prependTo(a),k=new nb(q,c),(K=
k.render())&&a.prepend(K),d(c.defaultView),h(window).resize(m),h("body")[0].offsetWidth!==0||e())};q.destroy=function(){h(window).unbind("resize",m);k.destroy();x.remove();a.removeClass("fc fc-rtl ui-widget")};q.refetchEvents=i;q.reportEvents=function(a){F=a;v()};q.reportEventChange=function(a){v(a)};q.rerenderEvents=v;q.changeView=d;q.select=function(a,b,c){l.select(a,b,c===y?true:c)};q.unselect=s;q.prev=function(){n(-1)};q.next=function(){n(1)};q.prevYear=function(){za(w,-1);n()};q.nextYear=function(){za(w,
1);n()};q.today=function(){w=new Date;n()};q.gotoDate=function(a,b,c){a instanceof Date?w=o(a):Qa(w,a,b,c);n()};q.incrementDate=function(a,b,c){a!==y&&za(w,a);b!==y&&Aa(w,b);c!==y&&u(w,c);n()};q.formatDate=function(a,b){return ba(a,b,c)};q.formatDates=function(a,b,x){return Ba(a,b,x,c)};q.getDate=function(){return o(w)};q.getView=function(){return l};q.option=function(a,b){if(b===y)return c[a];if(a=="height"||a=="contentHeight"||a=="aspectRatio")c[a]=b,j()};q.trigger=function(a,b){if(c[a])return c[a].apply(b||
t,Array.prototype.slice.call(arguments,2))};ob.call(q,c,b);var J=q.isFetchNeeded,p=q.fetchEvents,t=a[0],k,K,x,l,M={},$,aa,U,R=0,A=0,w=new Date,F=[],E;Qa(w,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var x=a.target,d=h(x);if(!d.parents(".fc").length){var e=c.dropAccept;if(h.isFunction(e)?e.call(x,d):d.is(e))E=x,l.dragStart(E,a,b)}}).bind("dragstop",function(a,b){E&&(l.dragStop(E,a,b),E=null)})}function nb(a,c){function b(b){var e=h("<td class='fc-header-"+b+"'/>");
(b=c.header[b])&&h.each(b.split(" "),function(b){b>0&&e.append("<span class='fc-header-space'/>");var g;h.each(this.split(","),function(b,f){if(f=="title")e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),g&&g.addClass(d+"-corner-right"),g=null;else{var n;a[f]?n=a[f]:Z[f]&&(n=function(){s.removeClass(d+"-state-hover");a.changeView(f)});if(n){var o=c.theme?Ca(c.buttonIcons,f):null,u=Ca(c.buttonText,f),s=h("<span class='fc-button fc-button-"+f+" "+d+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+
(o?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+o+"'/></span>":u)+"</span><span class='fc-button-effect'><span></span></span></span></span>");s&&(s.click(function(){s.hasClass(d+"-state-disabled")||n()}).mousedown(function(){s.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){s.removeClass(d+"-state-down")}).hover(function(){s.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){s.removeClass(d+
"-state-hover").removeClass(d+"-state-down")}).appendTo(e),g||s.addClass(d+"-corner-left"),g=s)}}});g&&g.addClass(d+"-corner-right")});return e}this.render=function(){d=c.theme?"ui":"fc";if(c.header)return e=h("<table class='fc-header' style='width:100%'/>").append(h("<tr/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-active")};
this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-disabled")};var e=h([]),d}function ob(a,c){function b(a,b){e(a,function(c){if(b==J){if(c){for(var e=0;e<c.length;e++)c[e].source=a,f(c[e]);k=k.concat(c)}p--;p||i(k)}})}function e(b,c){var d,f=H.sourceFetchers,g;for(d=0;d<f.length;d++)if(g=
f[d](b,s,q,c),g===true)return;else if(typeof g=="object"){e(g,c);return}if(d=b.events)h.isFunction(d)?(n(),d(o(s),o(q),function(a){c(a);j()})):h.isArray(d)?c(d):c();else if(b.url){var t=b.success,r=b.error,i=b.complete;d=h.extend({},b.data||{});f=oa(b.startParam,a.startParam);g=oa(b.endParam,a.endParam);f&&(d[f]=Math.round(+s/1E3));g&&(d[g]=Math.round(+q/1E3));n();h.ajax(h.extend({},pb,b,{data:d,success:function(a){var a=a||[],b=va(t,this,arguments);h.isArray(b)&&(a=b);c(a)},error:function(){va(r,
this,arguments);c()},complete:function(){va(i,this,arguments);j()}}))}else c()}function d(a){h.isFunction(a)||h.isArray(a)?a={events:a}:typeof a=="string"&&(a={url:a});if(typeof a=="object"){var b=a;if(b.className){if(typeof b.className=="string")b.className=b.className.split(/\s+/)}else b.className=[];for(var c=H.sourceNormalizers,d=0;d<c.length;d++)c[d](b);u.push(a);return a}}function n(){t++||r("loading",null,true)}function j(){--t||r("loading",null,false)}function f(b){var c=b.source||{},d=oa(c.ignoreTimezone,
a.ignoreTimezone);b._id=b._id||(b.id===y?"_fc"+qb++:b.id+"");if(b.date){if(!b.start)b.start=b.date;delete b.date}b._start=o(b.start=Da(b.start,d));b.end=Da(b.end,d);if(b.end&&b.end<=b.start)b.end=null;b._end=b.end?o(b.end):null;if(b.allDay===y)b.allDay=oa(c.allDayDefault,a.allDayDefault);if(b.className){if(typeof b.className=="string")b.className=b.className.split(/\s+/)}else b.className=[]}function g(a){return(typeof a=="object"?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!s||a<
s||b>q};this.fetchEvents=function(a,c){s=a;q=c;k=[];var d=++J,e=u.length;p=e;for(var f=0;f<e;f++)b(u[f],d)};this.addEventSource=function(a){if(a=d(a))p++,b(a,J)};this.removeEventSource=function(a){u=h.grep(u,function(b){return!(b&&a&&g(b)==g(a))});k=h.grep(k,function(b){return!(b.source&&a&&g(b.source)==g(a))});i(k)};this.updateEvent=function(a){var b,c=k.length,d,e=m().defaultEventEnd,g=a.start-a._start,j=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)if(d=k[b],d._id==a._id&&d!=a)d.start=new Date(+d.start+
g),d.end=a.end?d.end?new Date(+d.end+j):new Date(+e(d)+j):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,f(d);f(a);i(k)};this.renderEvent=function(a,b){f(a);if(!a.source){if(b)v.events.push(a),a.source=v;k.push(a)}i(k)};this.removeEvents=function(a){if(a){if(!h.isFunction(a))var b=a+"",a=function(a){return a._id==b};k=h.grep(k,a,true);for(c=0;c<u.length;c++)if(h.isArray(u[c].events))u[c].events=
h.grep(u[c].events,a,true)}else{k=[];for(var c=0;c<u.length;c++)if(h.isArray(u[c].events))u[c].events=[]}i(k)};this.clientEvents=function(a){if(h.isFunction(a))return h.grep(k,a);else if(a)return a+="",h.grep(k,function(b){return b._id==a});return k};this.normalizeEvent=f;for(var r=this.trigger,m=this.getView,i=this.reportEvents,v={events:[]},u=[v],s,q,J=0,p=0,t=0,k=[],K=0;K<c.length;K++)d(c[K])}function za(a,c,b){a.setFullYear(a.getFullYear()+c);b||ga(a);return a}function Aa(a,c,b){if(+a){var c=
a.getMonth()+c,e=o(a);e.setDate(1);e.setMonth(c);a.setMonth(c);for(b||ga(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function u(a,c,b){if(+a){var c=a.getDate()+c,e=o(a);e.setHours(9);e.setDate(c);a.setDate(c);b||ga(a);Ea(a,e)}return a}function Ea(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*rb)}function I(a,c){a.setMinutes(a.getMinutes()+c);return a}function ga(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function o(a,
c){return c?ga(new Date(+a)):new Date(+a)}function Ra(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function V(a,c,b){for(c=c||1;!a.getDay()||b&&a.getDay()==1||!b&&a.getDay()==6;)u(a,c);return a}function T(a,c){return Math.round((o(a,true)-o(c,true))/Sa)}function Qa(a,c,b,e){c!==y&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==y&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));e!==y&&a.setDate(e)}function Da(a,c){if(typeof a=="object")return a;if(typeof a==
"number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+(\.\d+)?$/))return new Date(parseFloat(a)*1E3);c===y&&(c=true);return Ta(a,c)||(a?new Date(a):null)}return null}function Ta(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var e=new Date(b[1],0,1);if(c||!b[13]){var d=new Date(b[1],0,1,9,0);b[3]&&(e.setMonth(b[3]-1),d.setMonth(b[3]-1));b[5]&&(e.setDate(b[5]),
d.setDate(b[5]));Ea(e,d);b[7]&&e.setHours(b[7]);b[8]&&e.setMinutes(b[8]);b[10]&&e.setSeconds(b[10]);b[12]&&e.setMilliseconds(Number("0."+b[12])*1E3);Ea(e,d)}else e.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),e.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?Number("0."+b[12])*1E3:0),b[14]&&(d=Number(b[16])*60+(b[18]?Number(b[18]):0),d*=b[15]=="-"?1:-1,e=new Date(+e+d*6E4));return e}function Fa(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=
parseInt(a[1],10);a[3]&&(c%=12,a[3].toLowerCase().charAt(0)=="p"&&(c+=12));return c*60+(a[2]?parseInt(a[2],10):0)}}function ba(a,c,b){return Ba(a,null,c,b)}function Ba(a,c,b,e){var e=e||ta,d=a,n=c,j,f=b.length,g,h,m,i="";for(j=0;j<f;j++)if(g=b.charAt(j),g=="'")for(h=j+1;h<f;h++){if(b.charAt(h)=="'"){d&&(i+=h==j+1?"'":b.substring(j+1,h),j=h);break}}else if(g=="(")for(h=j+1;h<f;h++){if(b.charAt(h)==")"){j=ba(d,b.substring(j+1,h),e);parseInt(j.replace(/\D/,""),10)&&(i+=j);j=h;break}}else if(g=="[")for(h=
j+1;h<f;h++){if(b.charAt(h)=="]"){g=b.substring(j+1,h);j=ba(d,g,e);j!=ba(n,g,e)&&(i+=j);j=h;break}}else if(g=="{")d=c,n=a;else if(g=="}")d=a,n=c;else{for(h=f;h>j;h--)if(m=sb[b.substring(j,h)]){d&&(i+=m(d,e));j=h-1;break}h==j&&d&&(i+=g)}return i}function pa(a){var c;a.end?(c=a.end,a=a.allDay,c=o(c),c=a||c.getHours()||c.getMinutes()?u(c,1):ga(c)):c=u(o(a.start),1);return c}function tb(a,c){return(c.msLength-a.msLength)*100+(a.event.start-c.event.start)}function Ga(a,c,b,e){var d=[],h,j=a.length,f,g,
r,m,i;for(h=0;h<j;h++)f=a[h],g=f.start,r=c[h],r>b&&g<e&&(g<b?(g=o(b),m=false):m=true,r>e?(r=o(e),i=false):i=true,d.push({event:f,start:g,end:r,isStart:m,isEnd:i,msLength:r-g}));return d.sort(tb)}function Ha(a){var c=[],b,e=a.length,d,h,j,f;for(b=0;b<e;b++){d=a[b];for(h=0;;){j=false;if(c[h])for(f=0;f<c[h].length;f++)if(c[h][f].end>d.start&&c[h][f].start<d.end){j=true;break}if(j)h++;else break}c[h]?c[h].push(d):c[h]=[d]}return c}function Ua(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var d=
a.target,n;d!=this;)n=d,d=d.parentNode;if((d=n._fci)!==y)n._fci=y,n=c[d],b(n.event,n.element,n),h(a.target).trigger(a);a.stopPropagation()})}function qa(a,c,b){for(var e=0,d;e<a.length;e++)d=h(a[e]),d.width(Math.max(0,c-Ia(d,b)))}function Va(a,c,b){for(var e=0,d;e<a.length;e++)d=h(a[e]),d.height(Math.max(0,c-na(d,b)))}function Ia(a,c){return(parseFloat(h.curCSS(a[0],"paddingLeft",true))||0)+(parseFloat(h.curCSS(a[0],"paddingRight",true))||0)+((parseFloat(h.curCSS(a[0],"borderLeftWidth",true))||0)+
(parseFloat(h.curCSS(a[0],"borderRightWidth",true))||0))+(c?(parseFloat(h.curCSS(a[0],"marginLeft",true))||0)+(parseFloat(h.curCSS(a[0],"marginRight",true))||0):0)}function na(a,c){return(parseFloat(h.curCSS(a[0],"paddingTop",true))||0)+(parseFloat(h.curCSS(a[0],"paddingBottom",true))||0)+((parseFloat(h.curCSS(a[0],"borderTopWidth",true))||0)+(parseFloat(h.curCSS(a[0],"borderBottomWidth",true))||0))+(c?Wa(a):0)}function Wa(a){return(parseFloat(h.curCSS(a[0],"marginTop",true))||0)+(parseFloat(h.curCSS(a[0],
"marginBottom",true))||0)}function ua(a,c){c=typeof c=="number"?c+"px":c;a.each(function(a,e){e.style.cssText+=";min-height:"+c+";_height:"+c})}function Pa(){}function Xa(a,c){return a-c}function Y(a){return(a<10?"0":"")+a}function Ca(a,c){if(a[c]!==y)return a[c];for(var b=c.split(/(?=[A-Z])/),e=b.length-1,d;e>=0;e--)if(d=a[b[e].toLowerCase()],d!==y)return d;return a[""]}function ca(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,
"<br />")}function Ya(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Ja(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}function wa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Ka(a,c){a.each(function(a,e){e.className=e.className.replace(/^fc-\w*/,"fc-"+ub[c.getDay()])})}
function Za(a,c){var b=a.source||{},e=a.color,d=b.color,h=c("eventColor"),j=a.backgroundColor||e||b.backgroundColor||d||c("eventBackgroundColor")||h,e=a.borderColor||e||b.borderColor||d||c("eventBorderColor")||h,b=a.textColor||b.textColor||c("eventTextColor"),d=[];j&&d.push("background-color:"+j);e&&d.push("border-color:"+e);b&&d.push("color:"+b);return d.join(";")}function va(a,c,b){h.isFunction(a)&&(a=[a]);if(a){var e,d;for(e=0;e<a.length;e++)d=a[e].apply(c,b)||d;return d}}function oa(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==y)return arguments[a]}function La(a,c,b){function e(a){var b=a||F==1,c=i.start.getMonth(),d=ga(new Date),e,f,g;b&&K.each(function(a,b){e=h(b);f=r(a);e.html(t(f,Q));Ka(e,f)});M.each(function(a,g){e=h(g);f=r(a);f.getMonth()==c?e.removeClass("fc-other-month"):e.addClass("fc-other-month");+f==+d?e.addClass(z+"-state-highlight fc-today"):e.removeClass(z+"-state-highlight fc-today");e.find("div.fc-day-number").text(f.getDate());b&&Ka(e,f)});l.each(function(a,b){g=
h(b);a<F?(g.show(),a==F-1?g.addClass("fc-last"):g.removeClass("fc-last")):g.hide()})}function d(a){if(!v("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),b=r(b);y("dayClick",this,b,true,a)}}function n(a,b,c){c&&G.build();for(var c=o(i.visStart),e=u(o(c),E),f=0;f<F;f++){var h=new Date(Math.max(c,a)),g=new Date(Math.min(e,b));if(h<g){var Q;O?(Q=T(g,c)*D+L+1,h=T(h,c)*D+L+1):(Q=T(h,c),h=T(g,c));j(f,Q,f,h-1).click(d).mousedown(p)}u(c,7);u(e,7)}}function j(b,c,d,e){b=G.rect(b,c,d,
e,a);return q(b,a)}function f(a){return{row:Math.floor(T(a,i.visStart)/7),col:m(a.getDay())}}function g(a){return u(o(i.visStart),a.row*7+a.col*D+L)}function r(a){return u(o(i.visStart),Math.floor(a/E)*7+a%E*D+L)}function m(a){return(a-Math.max(C,da)+E)%E*D+L}var i=this;i.renderBasic=function(b,c,f,g){F=c;E=f;(O=v("isRTL"))?(D=-1,L=E-1):(D=1,L=0);C=v("firstDay");da=v("weekends")?0:1;z=v("theme")?"ui":"fc";Q=v("columnFormat");if(c=!x){var j=z+"-widget-header",t=z+"-widget-content",i,f="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";
for(i=0;i<E;i++)f+="<th class='fc- "+j+"'/>";f+="</tr></thead><tbody>";for(i=0;i<b;i++){f+="<tr class='fc-week"+i+"'>";for(j=0;j<E;j++)f+="<td class='fc- "+t+" fc-day"+(i*E+j)+"'><div>"+(g?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";f+="</tr>"}f+="</tbody></table>";b=h(f).appendTo(a);k=b.find("thead");K=k.find("th");x=b.find("tbody");l=x.find("tr");M=x.find("td");$=M.filter(":first-child");aa=l.eq(0).find("div.fc-day-content div");
wa(k.add(k.find("tr")));wa(l);l.eq(0).addClass("fc-first");M.click(d).mousedown(p);U=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}else s();e(c)};i.setHeight=function(a){A=a;var a=A-k.height(),b,c,d;v("weekMode")=="variable"?b=c=Math.floor(a/(F==1?2:6)):(b=Math.floor(a/F),c=a-b*(F-1));$.each(function(a,e){a<F&&(d=h(e),ua(d.find("> div"),(a==F-1?c:b)-na(d)))})};i.setWidth=function(a){R=a;N.clear();w=Math.floor(R/E);qa(K.slice(0,-1),w)};i.renderDayOverlay=n;i.defaultSelectionEnd=
function(a){return o(a)};i.renderSelection=function(a,b){n(a,u(o(b),1),true)};i.clearSelection=function(){J()};i.reportDayClick=function(a,b,c){var d=f(a);y("dayClick",M[d.row*E+d.col],a,b,c)};i.dragStart=function(a,b){B.start(function(a){J();a&&j(a.row,a.col,a.row,a.col)},b)};i.dragStop=function(a,b,c){var d=B.stop();J();d&&(d=g(d),y("drop",a,d,true,b,c))};i.defaultEventEnd=function(a){return o(a.start)};i.getHoverListener=function(){return B};i.colContentLeft=function(a){return N.left(a)};i.colContentRight=
function(a){return N.right(a)};i.dayOfWeekCol=m;i.dateCell=f;i.cellDate=g;i.cellIsAllDay=function(){return true};i.allDayRow=function(a){return l.eq(a)};i.allDayBounds=function(){return{left:0,right:R}};i.getRowCnt=function(){return F};i.getColCnt=function(){return E};i.getColWidth=function(){return w};i.getDaySegmentContainer=function(){return U};db.call(i,a,c,b);eb.call(i);fb.call(i);vb.call(i);var v=i.opt,y=i.trigger,s=i.clearEvents,q=i.renderOverlay,J=i.clearOverlays,p=i.daySelectionMousedown,
t=c.formatDate,k,K,x,l,M,$,aa,U,R,A,w,F,E,G,B,N,O,D,L,C,da,z,Q;Ja(a.addClass("fc-grid"));G=new gb(function(a,b){var c,d,e;K.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();l.each(function(b,f){if(b<F)c=h(f),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e});e[1]=d+c.outerHeight()});B=new hb(G);N=new ib(function(a){return aa.eq(a)})}function vb(){function a(a){var c=p(),d=t(),e=o(b.visStart),d=u(o(e),d),f=h.map(a,pa),g,j,i,n,k,m,r=[];for(g=0;g<c;g++){j=Ha(Ga(a,
f,e,d));for(i=0;i<j.length;i++){n=j[i];for(k=0;k<n.length;k++)m=n[k],m.row=g,m.level=i,r.push(m)}u(e,7);u(d,7)}return r}function c(a,b){var c=s(),f;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),start:function(g,h){d("eventDragStart",b,a,g,h);i(a,b);c.start(function(c,d,g,h){b.draggable("option","revert",!c||!g&&!h);J();c?(f=g*7+h*(e("isRTL")?-1:1),q(u(o(a.start),f),u(pa(a),f))):f=0},g,"drag")},stop:function(e,g){c.stop();J();d("eventDragStop",b,a,e,
g);f?v(this,a,f,0,a.allDay,e,g):(b.css("filter",""),m(a,b))}})}var b=this;b.renderEvents=function(b,c){f(b);k(a(b),c)};b.compileDaySegs=a;b.clearEvents=function(){g();y().empty()};b.bindDaySeg=function(a,b,d){n(a)&&c(a,b);d.isEnd&&j(a)&&K(a,b,d);r(a,b)};jb.call(b);var e=b.opt,d=b.trigger,n=b.isEventDraggable,j=b.isEventResizable,f=b.reportEvents,g=b.reportEventClear,r=b.eventElementHandlers,m=b.showEvents,i=b.hideEvents,v=b.eventDrop,y=b.getDaySegmentContainer,s=b.getHoverListener,q=b.renderDayOverlay,
J=b.clearOverlays,p=b.getRowCnt,t=b.getColCnt,k=b.renderDaySegs,K=b.resizableDayEvent}function kb(a,c,b){function e(){function a(){z.scrollTop(d)}var b=Ra(),c=o(b);c.setHours(t("firstHour"));var d=v(b,c)+1;a();setTimeout(a,0)}function d(a){if(!t("selectable")){var b=Math.min(W-1,Math.floor((a.pageX-A.offset().left-X)/xa)),c=r(b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*t("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+ia),k("dayClick",G[b],c,false,a)):k("dayClick",
G[b],c,true,a)}}function n(a,b,c){c&&ja.build();var e=o(p.visStart);ba?(c=T(b,e)*ea+fa+1,a=T(a,e)*ea+fa+1):(c=T(a,e),a=T(b,e));c=Math.max(0,c);a=Math.min(W,a);c<a&&j(0,c,0,a-1).click(d).mousedown(aa)}function j(a,b,c,d){a=ja.rect(a,b,c,d,D);return x(a,D)}function f(a,b){for(var c=o(p.visStart),e=u(o(c),1),f=0;f<W;f++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(e,b));if(g<h){var j=f*ea+fa,j=ja.rect(0,j,0,j,Q),g=v(c,g),h=v(c,h);j.top=g;j.height=h-g;x(j,Q).click(d).mousedown(q)}u(c,1);u(e,1)}}
function g(a){var b=r(a.col),a=a.row;t("allDaySlot")&&a--;a>=0&&I(b,ia+a*t("slotMinutes"));return b}function r(a){return u(o(p.visStart),a*ea+fa)}function m(a){return t("allDaySlot")&&!a.row}function i(a){return(a-Math.max(V,Z)+W)%W*ea+fa}function v(a,b){a=o(a,true);if(b<I(o(a),ia))return 0;if(b>=I(o(a),Y))return ha.height();var c=t("slotMinutes"),d=b.getHours()*60+b.getMinutes()-ia,e=Math.floor(d/c),f=H[e];if(f===y)f=H[e]=ha.find("tr:eq("+e+") td div")[0].offsetTop;return Math.max(0,Math.round(f-
1+ra*(d%c/c)))}function S(a,b){var c=t("selectHelper");ja.build();if(c){var e=T(a,p.visStart)*ea+fa;if(e>=0&&e<W){var e=ja.rect(0,e,0,e,Q),g=v(a,a),j=v(a,b);if(j>g){e.top=g;e.height=j-g;e.left+=2;e.width-=5;if(h.isFunction(c)){if(c=c(a,b))e.position="absolute",e.zIndex=8,P=h(c).css(e).appendTo(Q)}else e.isStart=true,e.isEnd=true,P=h(U({title:"",start:a,end:b,className:["fc-select-helper"],editable:false},e)),P.css("opacity",t("dragOpacity"));P&&(P.click(d).mousedown(q),Q.append(P),qa(P,e.width,true),
Va(P,e.height,true))}}}else f(a,b)}function s(){l();P&&(P.remove(),P=null)}function q(a){if(a.which==1&&t("selectable")){$(a);var b;ma.start(function(a,c){s();if(a&&a.col==c.col&&!m(a)){var d=g(c),e=g(a);b=[d,I(o(d),t("slotMinutes")),e,I(o(e),t("slotMinutes"))].sort(Xa);S(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){ma.stop();b&&(+b[0]==+b[1]&&J(b[0],false,a),M(b[0],b[3],false,a))})}}function J(a,b,c){k("dayClick",G[i(a.getDay())],a,b,c)}var p=this;p.renderAgenda=function(b){W=
b;sa=t("theme")?"ui":"fc";Z=t("weekends")?0:1;V=t("firstDay");(ba=t("isRTL"))?(ea=-1,fa=W-1):(ea=1,fa=0);ia=Fa(t("minTime"));Y=Fa(t("maxTime"));ca=t("columnFormat");if(A)K();else{var b=sa+"-widget-header",c=sa+"-widget-content",e,f,g,j,i,n=t("slotMinutes")%15==0;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<W;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+
b+"'>&nbsp;</th>";for(f=0;f<W;f++)e+="<td class='fc- fc-col"+f+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";e+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>";A=h(e).appendTo(a);w=A.find("thead");F=w.find("th").slice(1,-1);E=A.find("tbody");G=E.find("td").slice(0,-1);B=G.find("div.fc-day-content div");N=G.eq(0);O=N.find("> div");wa(w.add(w.find("tr")));wa(E.add(E.find("tr")));ka=w.find("th:first");la=A.find(".fc-agenda-gutter");
D=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);t("allDaySlot")?(L=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(D),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+t("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",C=h(e).appendTo(D),da=C.find("tr"),da.find("td").click(d).mousedown(aa),
ka=ka.add(C.find("th:first")),la=la.add(C.find("th.fc-agenda-gutter")),D.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):L=h([]);z=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(D);Q=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(z);$a=h("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Q);e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";
g=Ra();j=I(o(g),Y);I(g,ia);for(f=Ma=0;g<j;f++)i=g.getMinutes(),e+="<tr class='fc-slot"+f+" "+(!i?"":"fc-minor")+"'><th class='fc-agenda-axis "+b+"'>"+(!n||!i?R(g,t("axisFormat")):"&nbsp;")+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",I(g,t("slotMinutes")),Ma++;e+="</tbody></table>";ha=h(e).appendTo(Q);ab=ha.find("div:first");ha.find("td").click(d).mousedown(q);ka=ka.add(ha.find("th:first"))}g=ga(new Date);for(b=0;b<W;b++)f=r(b),c=F.eq(b),c.html(R(f,ca)),e=G.eq(b),
+f==+g?e.addClass(sa+"-state-highlight fc-today"):e.removeClass(sa+"-state-highlight fc-today"),Ka(c.add(e),f)};p.setWidth=function(a){bb=a;ya.clear();X=0;qa(ka.width("").each(function(a,b){X=Math.max(X,h(b).outerWidth())}),X);a=z[0].clientWidth;(Na=z.width()-a)?(qa(la,Na),la.show().prev().removeClass("fc-last")):la.hide().prev().addClass("fc-last");xa=Math.floor((a-X)/W);qa(F.slice(0,-1),xa)};p.setHeight=function(a,b){a===y&&(a=cb);cb=a;H={};var c=E.position().top,d=z.position().top,f=Math.min(a-
c,ha.height()+d+1);O.height(f-na(N));D.css("top",c);z.height(f-d-1);ra=ab.height()+1;b&&e()};p.beforeHide=function(){lb=z.scrollTop()};p.afterShow=function(){z.scrollTop(lb)};p.defaultEventEnd=function(a){var b=o(a.start);return a.allDay?b:I(b,t("defaultEventMinutes"))};p.timePosition=v;p.dayOfWeekCol=i;p.dateCell=function(a){return{row:Math.floor(T(a,p.visStart)/7),col:i(a.getDay())}};p.cellDate=g;p.cellIsAllDay=m;p.allDayRow=function(){return da};p.allDayBounds=function(){return{left:X,right:bb-
Na}};p.getHoverListener=function(){return ma};p.colContentLeft=function(a){return ya.left(a)};p.colContentRight=function(a){return ya.right(a)};p.getDaySegmentContainer=function(){return L};p.getSlotSegmentContainer=function(){return $a};p.getMinMinute=function(){return ia};p.getMaxMinute=function(){return Y};p.getBodyContent=function(){return Q};p.getRowCnt=function(){return 1};p.getColCnt=function(){return W};p.getColWidth=function(){return xa};p.getSlotHeight=function(){return ra};p.defaultSelectionEnd=
function(a,b){return b?o(a):I(o(a),t("slotMinutes"))};p.renderDayOverlay=n;p.renderSelection=function(a,b,c){c?t("allDaySlot")&&n(a,u(o(b),1),true):S(a,b)};p.clearSelection=s;p.reportDayClick=J;p.dragStart=function(a,b){ma.start(function(a){l();if(a)if(m(a))j(a.row,a.col,a.row,a.col);else{var a=g(a),b=I(o(a),t("defaultEventMinutes"));f(a,b)}},b)};p.dragStop=function(a,b,c){var d=ma.stop();l();d&&k("drop",a,g(d),m(d),b,c)};db.call(p,a,c,b);eb.call(p);fb.call(p);wb.call(p);var t=p.opt,k=p.trigger,K=
p.clearEvents,x=p.renderOverlay,l=p.clearOverlays,M=p.reportSelection,$=p.unselect,aa=p.daySelectionMousedown,U=p.slotSegHtml,R=c.formatDate,A,w,F,E,G,B,N,O,D,L,C,da,z,Q,$a,ha,ab,ka,la,P,bb,cb,X,xa,Na,ra,lb,W,Ma,ja,ma,ya,H={},sa,V,Z,ba,ea,fa,ia,Y,ca;Ja(a.addClass("fc-agenda"));ja=new gb(function(a,b){var c,d,e;F.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();if(t("allDaySlot"))c=da,d=c.offset().top,a[0]=[d,d+c.outerHeight()];for(var f=Q.offset().top,g=
z.offset().top,j=g+z.outerHeight(),i=0;i<Ma;i++)a.push([Math.max(g,Math.min(j,f+ra*i)),Math.max(g,Math.min(j,f+ra*(i+1)))])});ma=new hb(ja);ya=new ib(function(a){return B.eq(a)})}function wb(){function a(a){var a=Ha(Ga(a,h.map(a,pa),f.visStart,f.visEnd)),b,c=a.length,d,e,g,j=[];for(b=0;b<c;b++){d=a[b];for(e=0;e<d.length;e++)g=d[e],g.row=0,g.level=b,j.push(g)}return j}function c(a){return a.end?o(a.end):I(o(a.start),g("defaultEventMinutes"))}function b(a,b){var c="<",d=a.url,e=Za(a,g),f=e?" style='"+
e+"'":"",h=["fc-event","fc-event-skin","fc-event-vert"];m(a)&&h.push("fc-event-draggable");b.isStart&&h.push("fc-corner-top");b.isEnd&&h.push("fc-corner-bottom");h=h.concat(a.className);a.source&&(h=h.concat(a.source.className||[]));c+=d?"a href='"+ca(a.url)+"'":"div";c+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner fc-event-skin'"+f+"><div class='fc-event-head fc-event-skin'"+f+"><div class='fc-event-time'>"+ca(z(a.start,
a.end,g("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+ca(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&i(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");c+="</"+(d?"a":"div")+">";return c}function e(a,b,c){var d=b.find("div.fc-event-time");m(a)&&n(a,b,d);c.isEnd&&i(a)&&j(a,b,d);q(a,b)}function d(a,b,c){function d(){h||(b.width(e).height("").draggable("option","grid",null),h=true)}var e,f,h=true,j,i=g("isRTL")?-1:
1,t=k(),n=A(),m=w(),l=x();b.draggable({zIndex:9,opacity:g("dragOpacity","month"),revertDuration:g("dragRevertDuration"),start:function(k,l){r("eventDragStart",b,a,k,l);B(a,b);e=b.width();t.start(function(e,t,k,l){L();e?(f=false,j=l*i,e.row?c?h&&(b.width(n-10),Va(b,m*Math.round((a.end?(a.end-a.start)/xb:g("defaultEventMinutes"))/g("slotMinutes"))),b.draggable("option","grid",[n,1]),h=false):f=true:(D(u(o(a.start),j),u(pa(a),j)),d()),f=f||h&&!j):(d(),f=true);b.draggable("option","revert",f)},k,"drag")},
stop:function(c,e){t.stop();L();r("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),G(a,b);else{var i=0;h||(i=Math.round((b.offset().top-F().offset().top)/m)*g("slotMinutes")+l-(a.start.getHours()*60+a.start.getMinutes()));N(this,a,j,i,h,c,e)}}})}function n(a,b,c){function d(b){var e=I(o(a.start),b),f;a.end&&(f=I(o(a.end),b));c.text(z(e,f,g("timeFormat")))}function e(){h&&(c.css("display",""),b.draggable("option","grid",[p,x]),h=false)}var f,h=false,j,i,t,n=g("isRTL")?-1:1,m=k(),l=R(),p=A(),x=
w();b.draggable({zIndex:9,scroll:false,grid:[p,x],axis:l==1?"y":false,opacity:g("dragOpacity"),revertDuration:g("dragRevertDuration"),start:function(d,k){d=d.originalEvent;r("eventDragStart",b,a,d,k);B(a,b);f=b.position();i=t=0;m.start(function(d,f,i,t){b.draggable("option","revert",!d);L();d&&(j=t*n,g("allDaySlot")&&!d.row?(h||(h=true,c.hide(),b.draggable("option","grid",null)),D(u(o(a.start),j),u(pa(a),j))):e())},d,"drag")},drag:function(a,b){i=Math.round((b.position.top-f.top)/x)*g("slotMinutes");
i!=t&&(h||d(i),t=i)},stop:function(c,g){var c=c.originalEvent,t=m.stop();L();r("eventDragStop",b,a,c,g);t&&(j||i||h)?N(this,a,j,h?0:i,h,c,g):(e(),b.css("filter",""),b.css(f),d(0),G(a,b))}})}function j(a,b,c){var d,e,f=w();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0;B(a,b);b.css("z-index",9);r("eventResizeStart",this,a,c,f)},resize:function(h,j){d=Math.round((Math.max(f,b.height())-j.originalSize.height)/f);d!=e&&(c.text(z(a.start,!d&&!a.end?null:I(v(a),g("slotMinutes")*
d),g("timeFormat"))),e=d)},stop:function(c,e){r("eventResizeStop",this,a,c,e);d?O(this,a,0,g("slotMinutes")*d,c,e):(b.css("z-index",8),G(a,b))}})}var f=this;f.renderEvents=function(d,j){S(d);var i,n=d.length,k=[],m=[];for(i=0;i<n;i++)d[i].allDay?k.push(d[i]):m.push(d[i]);g("allDaySlot")&&(H(a(k),j),J());var n=R(),k=x(),p=K(),L=I(o(f.visStart),k),B=h.map(m,c),z,q,s,C,v,D;i=[];for(z=0;z<n;z++){s=q=Ha(Ga(m,B,L,I(o(L),p-k)));var N=D=v=C=void 0,O=void 0,w=void 0;for(C=s.length-1;C>0;C--){N=s[C];for(v=
0;v<N.length;v++){O=N[v];for(D=0;D<s[C-1].length;D++)if(w=s[C-1][D],O.end>w.start&&O.start<w.end)w.forward=Math.max(w.forward||0,(O.forward||0)+1)}}for(s=0;s<q.length;s++){C=q[s];for(v=0;v<C.length;v++)D=C[v],D.col=z,D.level=s,i.push(D)}u(L,1,true)}var m=i.length,A,F,G;q="";p={};L={};z=t();n=R();(s=g("isRTL"))?(C=-1,N=n-1):(C=1,N=0);for(n=0;n<m;n++)k=i[n],B=k.event,v=l(k.start,k.start),D=l(k.start,k.end),A=k.col,O=k.level,w=k.forward||0,F=M(A*C+N),G=$(A*C+N)-F,G=Math.min(G-6,G*0.95),A=O?G/(O+w+1):
w?(G/(w+1)-6)*2:G,O=F+G/(O+w+1)*O*C+(s?G-A:0),k.top=v,k.left=O,k.outerWidth=A,k.outerHeight=D-v,q+=b(B,k);z[0].innerHTML=q;s=z.children();for(n=0;n<m;n++)k=i[n],B=k.event,q=h(s[n]),C=r("eventRender",B,B,q),C===false?q.remove():(C&&C!==true&&(q.remove(),q=h(C).css({position:"absolute",top:k.top,left:k.left}).appendTo(z)),k.element=q,B._id===j?e(B,q,k):q[0]._fci=n,E(B,q));Ua(z,i,e);for(n=0;n<m;n++)if(k=i[n],q=k.element)if(z=p[B=k.key=Ya(q[0])],k.vsides=z===y?p[B]=na(q,true):z,z=L[B],k.hsides=z===y?
L[B]=Ia(q,true):z,B=q.find("div.fc-event-content"),B.length)k.contentTop=B[0].offsetTop;for(n=0;n<m;n++)if(k=i[n],q=k.element)q[0].style.width=Math.max(0,k.outerWidth-k.hsides)+"px",p=Math.max(0,k.outerHeight-k.vsides),q[0].style.height=p+"px",B=k.event,k.contentTop!==y&&p-k.contentTop<10&&(q.find("div.fc-event-time").text(da(B.start,g("timeFormat"))+" - "+B.title),q.find("div.fc-event-title").remove()),r("eventAfterRender",B,B,q)};f.compileDaySegs=a;f.clearEvents=function(){s();p().empty();t().empty()};
f.slotSegHtml=b;f.bindDaySeg=function(a,b,c){m(a)&&d(a,b,c.isStart);c.isEnd&&i(a)&&U(a,b,c);q(a,b)};jb.call(f);var g=f.opt,r=f.trigger,m=f.isEventDraggable,i=f.isEventResizable,v=f.eventEnd,S=f.reportEvents,s=f.reportEventClear,q=f.eventElementHandlers,J=f.setHeight,p=f.getDaySegmentContainer,t=f.getSlotSegmentContainer,k=f.getHoverListener,K=f.getMaxMinute,x=f.getMinMinute,l=f.timePosition,M=f.colContentLeft,$=f.colContentRight,H=f.renderDaySegs,U=f.resizableDayEvent,R=f.getColCnt,A=f.getColWidth,
w=f.getSlotHeight,F=f.getBodyContent,E=f.reportEventElement,G=f.showEvents,B=f.hideEvents,N=f.eventDrop,O=f.eventResize,D=f.renderDayOverlay,L=f.clearOverlays,C=f.calendar,da=C.formatDate,z=C.formatDates}function db(a,c,b){function e(a,c){var d=p[a];return typeof d=="object"?Ca(d,c||b):d}function d(a,b){return c.trigger.apply(c,[a,b||m].concat(Array.prototype.slice.call(arguments,2),[m]))}function h(a){return oa(a.editable,(a.source||{}).editable,e("editable"))}function j(a){return a.end?o(a.end):
i(a)}function f(a,b,c){var a=J[a._id],d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function g(a,b,c,d){for(var c=c||0,e,f=a.length,g=0;g<f;g++){e=a[g];if(d!==y)e.allDay=d;I(u(e.start,b,true),c);if(e.end)e.end=I(u(e.end,b,true),c);v(e,p)}}function r(a,b,c){for(var c=c||0,d,e=a.length,f=0;f<e;f++)d=a[f],d.end=I(u(j(d),b,true),c),v(d,p)}var m=this;m.element=a;m.calendar=c;m.name=b;m.opt=e;m.trigger=d;m.isEventDraggable=function(a){return h(a)&&!e("disableDragging")};m.isEventResizable=
function(a){return h(a)&&!e("disableResizing")};m.reportEvents=function(a){s={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],s[d._id]?s[d._id].push(d):s[d._id]=[d]};m.eventEnd=j;m.reportEventElement=function(a,b){q.push(b);J[a._id]?J[a._id].push(b):J[a._id]=[b]};m.reportEventClear=function(){q=[];J={}};m.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return d("eventClick",this,a,c)}).hover(function(b){d("eventMouseover",
this,a,b)},function(b){d("eventMouseout",this,a,b)})};m.showEvents=function(a,b){f(a,b,"show")};m.hideEvents=function(a,b){f(a,b,"hide")};m.eventDrop=function(a,b,c,e,f,h,j){var i=b.allDay,n=b._id;g(s[n],c,e,f);d("eventDrop",a,b,c,e,f,function(){g(s[n],-c,-e,i);S(n)},h,j);S(n)};m.eventResize=function(a,b,c,e,f,g){var h=b._id;r(s[h],c,e);d("eventResize",a,b,c,e,function(){r(s[h],-c,-e);S(h)},f,g);S(h)};var i=m.defaultEventEnd,v=c.normalizeEvent,S=c.reportEventChange,s={},q=[],J={},p=c.options}function jb(){function a(a){var b=
r("isRTL"),c,d=a.length,e,f,g,h;c=x();var j=c.left,n=c.right,k,m,q,p,o,s="";for(c=0;c<d;c++)e=a[c],f=e.event,h=["fc-event","fc-event-skin","fc-event-hori"],i(f)&&h.push("fc-event-draggable"),b?(e.isStart&&h.push("fc-corner-right"),e.isEnd&&h.push("fc-corner-left"),k=H(e.end.getDay()-1),m=H(e.start.getDay()),q=e.isEnd?l(k):j,p=e.isStart?I(m):n):(e.isStart&&h.push("fc-corner-left"),e.isEnd&&h.push("fc-corner-right"),k=H(e.start.getDay()),m=H(e.end.getDay()-1),q=e.isStart?l(k):j,p=e.isEnd?I(m):n),h=
h.concat(f.className),f.source&&(h=h.concat(f.source.className||[])),g=f.url,o=Za(f,r),s+=g?"<a href='"+ca(g)+"'":"<div",s+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;left:"+q+"px;"+o+"'><div class='fc-event-inner fc-event-skin'"+(o?" style='"+o+"'":"")+">",!f.allDay&&e.isStart&&(s+="<span class='fc-event-time'>"+ca(w(f.start,f.end,r("timeFormat")))+"</span>"),s+="<span class='fc-event-title'>"+ca(f.title)+"</span></div>",e.isEnd&&v(f)&&(s+="<div class='ui-resizable-handle ui-resizable-"+
(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),s+="</"+(g?"a":"div")+">",e.left=q,e.outerWidth=p-q,e.startCol=k,e.endCol=m+1;return s}function c(a,b){var c,d=a.length,e,f,g;for(c=0;c<d;c++)e=a[c],f=e.event,g=h(b[c]),f=m("eventRender",f,f,g),f===false?g.remove():(f&&f!==true&&(f=h(f).css({position:"absolute",left:e.left}),g.replaceWith(f),g=f),e.element=g)}function b(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key=Ya(e[0]),g=h[f],g===y&&(g=h[f]=Ia(e,true)),d.hsides=g}function e(a){var b,
c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function d(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key,g=h[f],g===y&&(g=h[f]=Wa(e)),d.outerHeight=e[0].offsetHeight+g}function n(){var a,b=t(),c=[];for(a=0;a<b;a++)c[a]=K(a).find("td:first div.fc-day-content > div");return c}function j(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function f(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=
a[c],f=e.element)f[0].style.top=b[e.row]+(e.top||0)+"px",e=e.event,m("eventAfterRender",e,e,f)}var g=this;g.renderDaySegs=function(g,h){var i=R(),m=t(),q=k(),p=0,o,r,l,v=g.length,u,x;i[0].innerHTML=a(g);c(g,i.children());r=g.length;for(o=0;o<r;o++)l=g[o],(x=l.element)&&s(l.event,x);r=g.length;var w;for(o=0;o<r;o++)if(l=g[o],x=l.element)w=l.event,w._id===h?A(w,x,l):x[0]._fci=o;Ua(i,g,A);b(g);e(g);d(g);i=n();for(o=0;o<m;o++){r=[];for(l=0;l<q;l++)r[l]=0;for(;p<v&&(u=g[p]).row==o;){l=r.slice(u.startCol,
u.endCol);l=Math.max.apply(Math,l);u.top=l;l+=u.outerHeight;for(x=u.startCol;x<u.endCol;x++)r[x]=l;p++}i[o].height(Math.max.apply(Math,r))}f(g,j(i))};g.resizableDayEvent=function(i,l,s){var v=r("isRTL"),x=v?"w":"e",w=l.find("div.ui-resizable-"+x),y=false;Ja(l);l.mousedown(function(a){a.preventDefault()}).click(function(a){y&&(a.preventDefault(),a.stopImmediatePropagation())});w.mousedown(function(r){if(r.which==1){y=true;var w=g.getHoverListener(),A=t(),C=k(),H=v?-1:1,I=v?C-1:0,K=l.css("top"),P,M,
T=h.extend({},i),X=V(i.start);G();h("body").css("cursor",x+"-resize").one("mouseup",function(a){m("eventResizeStop",this,i,a);h("body").css("cursor","");w.stop();E();P&&p(this,i,P,0,a);setTimeout(function(){y=false},0)});m("eventResizeStart",this,i,r);w.start(function(g,k){if(g){var m=Math.max(X.row,g.row),l=g.col;A==1&&(m=0);m==X.row&&(l=v?Math.min(X.col,l):Math.max(X.col,l));P=m*7+l*H+I-(k.row*7+k.col*H+I);m=u(S(i),P,true);if(P){T.end=m;var l=M,r=U([T]),p=s.row,t=h("<div/>"),w=R(),y=r.length,z;
t[0].innerHTML=a(r);t=t.children();w.append(t);c(r,t);b(r);e(r);d(r);f(r,j(n()));t=[];for(w=0;w<y;w++)if(z=r[w].element)r[w].row===p&&z.css("top",K),t.push(z[0]);M=h(t);M.find("*").css("cursor",x+"-resize");l&&l.remove();J(i)}else M&&(q(i),M.remove(),M=null);E();F(i.start,u(o(m),1))}},r)}})};var r=g.opt,m=g.trigger,i=g.isEventDraggable,v=g.isEventResizable,S=g.eventEnd,s=g.reportEventElement,q=g.showEvents,J=g.hideEvents,p=g.eventResize,t=g.getRowCnt,k=g.getColCnt,K=g.allDayRow,x=g.allDayBounds,l=
g.colContentLeft,I=g.colContentRight,H=g.dayOfWeekCol,V=g.dateCell,U=g.compileDaySegs,R=g.getDaySegmentContainer,A=g.bindDaySeg,w=g.calendar.formatDates,F=g.renderDayOverlay,E=g.clearOverlays,G=g.clearSelection}function fb(){function a(a){g&&(g=false,f(),d("unselect",null,a))}function c(a,b,c,e){g=true;d("select",null,a,b,c,e)}var b=this;b.select=function(b,d,e){a();d||(d=n(b,e));j(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(d){var g=b.cellDate,i=b.cellIsAllDay,
n=b.getHoverListener(),o=b.reportDayClick;if(d.which==1&&e("selectable")){a(d);var s;n.start(function(a,b){f();a&&i(a)?(s=[g(b),g(a)].sort(Xa),j(s[0],s[1],true)):s=null},d);h(document).one("mouseup",function(a){n.stop();s&&(+s[0]==+s[1]&&o(s[0],true,a),c(s[0],s[1],true,a))})}};var e=b.opt,d=b.trigger,n=b.defaultSelectionEnd,j=b.renderSelection,f=b.clearSelection,g=false;e("selectable")&&e("unselectAuto")&&h(document).mousedown(function(b){var c=e("unselectCancel");(!c||!h(b.target).parents(c).length)&&
a(b)})}function eb(){this.renderOverlay=function(b,e){var d=c.shift();d||(d=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));d[0].parentNode!=e[0]&&d.appendTo(e);a.push(d.css(b).show());return d};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function gb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,d){var h=c.length,j=b.length,f,g=-1,o=-1;for(f=0;f<h;f++)if(d>=c[f][0]&&d<c[f][1]){g=f;break}for(f=0;f<
j;f++)if(a>=b[f][0]&&a<b[f][1]){o=f;break}return g>=0&&o>=0?{row:g,col:o}:null};this.rect=function(a,d,h,j,f){f=f.offset();return{top:c[a][0]-f.top,left:b[d][0]-f.left,width:b[j][1]-b[d][0],height:c[h][1]-c[a][0]}}}function hb(a){function c(b){b=b.originalEvent;b=a.cell(b.pageX,b.pageY);if(!b!=!n||b&&(b.row!=n.row||b.col!=n.col))b?(d||(d=b),e(b,d,b.row-d.row,b.col-d.col)):e(b,d),n=b}var b,e,d,n;this.start=function(j,f,g){e=j;d=n=null;a.build();c(f);b=g||"mousemove";h(document).bind(b,c)};this.stop=
function(){h(document).unbind(b,c);return n}}function ib(a){var c=this,b={},e={},d={};c.left=function(c){return e[c]=e[c]===y?(b[c]=b[c]||a(c)).position().left:e[c]};c.right=function(e){return d[e]=d[e]===y?c.left(e)+(b[e]=b[e]||a(e)).width():d[e]};c.clear=function(){b={};e={};d={}}}var ta={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",
week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),buttonText:{prev:"&nbsp;&#9668;&nbsp;",
next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},yb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},
H=h.fullCalendar={version:"1.5.2"},Z=H.views={};h.fn.fullCalendar=function(a){if(typeof a=="string"){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=h.data(this,"fullCalendar");d&&h.isFunction(d[a])&&(d=d[a].apply(d,c),b===y&&(b=d),a=="destroy"&&h.removeData(this,"fullCalendar"))});return b!==y?b:this}var e=a.eventSources||[];delete a.eventSources;a.events&&(e.push(a.events),delete a.events);a=h.extend(true,{},ta,a.isRTL||a.isRTL===y&&ta.isRTL?yb:{},a);this.each(function(b,
c){var j=h(c),f=new mb(j,a,e);j.data("fullCalendar",f);f.render()});return this};H.sourceNormalizers=[];H.sourceFetchers=[];var pb={dataType:"json",cache:false},qb=1;H.addDays=u;H.cloneDate=o;H.parseDate=Da;H.parseISO8601=Ta;H.parseTime=Fa;H.formatDate=ba;H.formatDates=Ba;var ub="sun,mon,tue,wed,thu,fri,sat".split(","),Sa=864E5,rb=36E5,xb=6E4,sb={s:function(a){return a.getSeconds()},ss:function(a){return Y(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Y(a.getMinutes())},
h:function(a){return a.getHours()%12||12},hh:function(a){return Y(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Y(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Y(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Y(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},
yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return ba(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return a>10&&a<20?"th":["st","nd","rd"][a%10-1]||"th"}};H.applyAll=va;Z.month=function(a,c){var b=this;b.render=function(a,c){c&&(Aa(a,
c),a.setDate(1));var g=o(a,true);g.setDate(1);var r=Aa(o(g),1),m=o(g),i=o(r),v=e("firstDay"),y=e("weekends")?0:1;y&&(V(m),V(i,-1,true));u(m,-((m.getDay()-Math.max(v,y)+7)%7));u(i,(7-i.getDay()+Math.max(v,y))%7);v=Math.round((i-m)/(Sa*7));e("weekMode")=="fixed"&&(u(i,(6-v)*7),v=6);b.title=h(g,e("titleFormat"));b.start=g;b.end=r;b.visStart=m;b.visEnd=i;d(6,v,y?5:7,true)};La.call(b,a,c,"month");var e=b.opt,d=b.renderBasic,h=c.formatDate};Z.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&
u(a,c*7);var g=u(o(a),-((a.getDay()-e("firstDay")+7)%7)),r=u(o(g),7),m=o(g),i=o(r),v=e("weekends");v||(V(m),V(i,-1,true));b.title=h(m,u(o(i),-1),e("titleFormat"));b.start=g;b.end=r;b.visStart=m;b.visEnd=i;d(1,1,v?7:5,false)};La.call(b,a,c,"basicWeek");var e=b.opt,d=b.renderBasic,h=c.formatDates};Z.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&(u(a,c),e("weekends")||V(a,c<0?-1:1));b.title=h(a,e("titleFormat"));b.start=b.visStart=o(a,true);b.end=b.visEnd=u(o(b.start),1);d(1,1,1,false)};
La.call(b,a,c,"basicDay");var e=b.opt,d=b.renderBasic,h=c.formatDate};Oa({weekMode:"fixed"});Z.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&u(a,c*7);var g=u(o(a),-((a.getDay()-e("firstDay")+7)%7)),r=u(o(g),7),m=o(g),i=o(r),v=e("weekends");v||(V(m),V(i,-1,true));b.title=h(m,u(o(i),-1),e("titleFormat"));b.start=g;b.end=r;b.visStart=m;b.visEnd=i;d(v?7:5)};kb.call(b,a,c,"agendaWeek");var e=b.opt,d=b.renderAgenda,h=c.formatDates};Z.agendaDay=function(a,c){var b=this;b.render=function(a,
c){c&&(u(a,c),e("weekends")||V(a,c<0?-1:1));var g=o(a,true),r=u(o(g),1);b.title=h(a,e("titleFormat"));b.start=b.visStart=g;b.end=b.visEnd=r;d(1)};kb.call(b,a,c,"agendaDay");var e=b.opt,d=b.renderAgenda,h=c.formatDate};Oa({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
